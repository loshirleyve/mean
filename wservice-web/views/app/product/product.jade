//
   Created by rxy on 15/11/3.

extends ../../layout/layout-bizpage

block content
    script(src="/js/bpc/productconfig.js")
    script(src="/js/app/product.js")
    div(ng-app="productApp")
        //通知区域
        //内容区域
        div(ng-view)
        //列表模板
        script(type="text/ng-template",id="list.html")
            //功能导航区
            div.row
                div.col-md-12
                    ul.breadcrumb
                        li
                            a(href="home")
                                span.glyphicon.glyphicon-home
                                span 首页
                        li.active 产品列表

            div.row
                div.col-md-12
                    form.form-inline(style="padding-top:10px;padding-bottom:10px;")
                        div.form-group
                            p.form-control-static 省
                            &nbsp
                        div.form-group
                            select.form-control(ng-model="query.province")
                                option 请选择
                                option 广东省
                                option 陕西市
                        &nbsp &nbsp
                        div.form-group
                            p.form-control-static 市
                            &nbsp
                        div.form-group
                            select.form-control(ng-model="query.city")
                                option 请选择
                                option 广东省
                                option 陕西市
                        &nbsp &nbsp
                        div.form-group
                            p.form-control-static 区
                            &nbsp
                        div.form-group
                            select.form-control(ng-model="query.district")
                                option 请选择
                                option 广东省
                                option 陕西市
            //功能按钮区域
            div.row
                div.col-md-12
                    div.btn-group
                        label.btn.btn-primary.btn-sm(ng-model="query.groupid" uib-btn-radio="'all'" ng-click="queryByGroupId()" data-loading-text="正在查询..." id="all") 全部
                        label.btn.btn-primary.btn-sm(ng-model="query.groupid" uib-btn-radio="'weifenlei'" ng-click="queryByGroupId()" data-loading-text="正在查询..." id="weifenlei") 未分类
                        label.btn.btn-primary.btn-sm(ng-model="query.groupid" uib-btn-radio="'10000002335325'" ng-click="queryByGroupId()" data-loading-text="正在查询..." id="jinxuan") 精选
                        label.btn.btn-primary.btn-sm(ng-model="query.groupid" uib-btn-radio="'48670000000010019'" ng-click="queryByGroupId()" data-loading-text="正在查询..." id="caiwu") 财务
                    | &nbsp
                    label.btn.btn-primary.btn-sm(data-toggle="modal",data-target="#addProduct") 添加产品
                    | &nbsp
                    label.btn.btn-primary.btn-sm(data-toggle="modal",data-target="#addProductClassifies") 添加分类
                    | &nbsp
                    label.btn.btn-primary.btn-sm(data-toggle="modal",data-target="#editProductClassifies") 编辑分类
                    | &nbsp
                    label.btn.btn-primary.btn-sm(ng-click="query.toggle()",data-loading-text="正在查询...",id="query") {{query.text}}
                    | &nbsp
                    label.btn.btn-primary.btn-sm(ng-click="checkNew.toggle()",data-loading-text="正在查询...",id="checkNew") {{checkNew.text}}
            p
                //检查新订单区域
            div.row
                div.col-md-12
                    div(uib-collapse="!checkNew.isCollapsed")
                        div.well.well-lg 检查新订单
            //条件查询内容输入区域
            div.row
                div.col-md-12
                    div(uib-collapse="!query.isCollapsed")
                        div.well.well-lg 条件查询内容
            //数据表格区域
            div.row
                div.col-md-12
                    y9ui-datatable(is-pagination="true",items-per-page="10",header="header",data="data",action="action",is-index="true",on-action="productAction(type,item,index)")
            //详情模板
        script(type="text/ng-template",id="detail.html")
            //功能导航区域
            div.row
                div.col-md-12
                    ul.breadcrumb
                        li
                            a(href="/home")
                                span.glyphicon.glyphicon-home
                                span 首页
                        li
                            a(href="#list")
                                span 产品列表
                        li.active 产品详情

            nav.navbar.navbar-default
                div.navbar-header
                    a.navbar-brand(href="") 产品详情
                ul.nav.navbar-nav.navbar-right
                    li
                        a(href="") 下架
                    li
                        a(href="",ng-click="query.previous(productid)",ng-show="{{query.previousId(productid)}}") 上一单
                    li
                        a(href="",ng-click="query.next(productid)",ng-show="{{query.nextId(productid)}}") 下一单
                    li
                        a(href="#/list") 返回
                    li
                        | &nbsp &nbsp &nbsp &nbsp
            div.row
                div.col-md-12
                    div.panel.panel-default
                        div.panel-heading 基本信息
                        div(style="padding-top:10px;")
                            div.table-responsive
                                table#table1.table.table-striped.table-hover.table-bordered.table-condensed
                                    tbody
                                        tr
                                            th.text-center #
                                            th.text-center 产品名称
                                            th.text-center 价钱
                                            th.text-center 产品状态
                                            th.text-center 促销价格
                                            th.text-center 产品类型
                                            th.text-center 办理天数
                                            th.text-center.col-md-2 操作
                                        tr
                                            td.text-center 1
                                            td.text-center {{data.product.name}}
                                            td.text-center {{data.product.saleprice}}
                                            td.text-center {{data.product.state}}
                                            td.text-center {{data.product.pricedescr}}
                                            td.text-center {{data.product.type}}
                                            td.text-center {{data.product.daynum}}
                                            td.text-center
                                                button.btn.btn-primary.btn-sm 编辑

            div.row
                div.col-md-12
                    div.panel.panel-default
                        div.panel-heading 服务阶段
                        y9ui-datatable(header="productPhasesHeader",data="data.productPhases",action="productPhasesAction",is-index="true",on-action="doProductPhases(type,item,index)")

            div.row
                div.col-md-12
                    div.panel.panel-default
                        div.panel-heading 资料清单
                        y9ui-datatable(header="productPhasesHeader",data="data.productPhases",action="productPhasesAction",is-index="true",on-action="doProductPhases(type,item,index)")

            div.row
                div.col-md-12
                    div.panel.panel-default
                        div.panel-heading 服务内容
                        y9ui-datatable(header="productProfilesHeader",data="data.bizProductProfiles",action="productProfilesAction",is-index="true",on-action="doProductProfiles(type,item,index)")

            div.row
                div.col-md-12
                    div.panel.panel-default
                        div.panel-heading 服务分组
                        y9ui-datatable(header="productGroupsHeader",data="data.productGroups",action="productGroupsAction",is-index="true",on-action="doProductGroups(type,item,index)")

            div.row
               div.col-md-12
                   div.panel.panel-default
                       div.panel-heading 服务分类
                       y9ui-datatable(header="productClassifiesHeader",data="data.bizProductClassifies",action="productClassifiesAction",is-index="true",on-action="doProductClassifies(type,item,index)")

            div.row
               div.col-md-12
                   div.panel.panel-default
                       div.panel-heading 服务说明
                       y9ui-datatable(header="productDescrsHeader",data="data.bizProductDescrs",action="productDescrsAction",is-index="true",on-action="doProductDescrs(type,item,index)")

        //弹出层，添加分类
        div#addProductClassifies.modal.fade(tabindex="-1",role="dialog")
            div.modal-dialog(role="document")
                div.modal-content
                    div.modal-header
                        button.close(type="button",data-dismiss="modal",aria-label="Close")
                            span(aria-hidden="ture")&times;
                        h4.modal-title 添加分类
                    div.modal-body
                        form.form-horizontal
                            div.form-group
                                label.col-md-3.control-label 分类名称:
                                div.col-md-9
                                    input.form-control(type="text")
                        div.modal-footer
                            button.btn.btn-default(type="button",data-dismiss="modal") 关闭
                            button.btn.btn-primary(type="button",data-dismiss="modal") 确认

        //弹出层，编辑分类
        div#editProductClassifies.modal.fade(tabindex="-1",role="dialog")
            div.modal-dialog(role="document")
                div.modal-content
                    div.modal-header
                        button.close(type="button",data-dismiss="modal",aria-label="Close")
                            span(aria-hidden="ture")&times;
                        h4.modal-title 编辑分类
                    div.modal-body
                        div.col-md-12
                            y9ui-datatable(header="allproductClassifiesHeader",data="classfilesData",action="allproductClassifiesAction",is-index="true",on-action="dollproductClassifies(type,item,index)")
                            //详情模板
                        div.modal-footer
                            button.btn.btn-default(type="button",data-dismiss="modal") 关闭
                            button.btn.btn-primary(type="button",data-dismiss="modal") 确认
