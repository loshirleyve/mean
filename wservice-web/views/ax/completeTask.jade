//
   Created by Leon on 15/10/15.

extends ../layout/layout-bizpage
block titleContent
    title 完成任务
block content
    script(src="/js/ax/complateTask.js")
    script(src="/js/biz/workorder/workorderForm.js")
    div(ng-app="AXCompleteTaskApp")
        //内容区域
        div(ng-view)

        //列表模板
        script(type="text/ng-template",id="form.html")
            //功能导航区域
            ul.breadcrumb
                li
                    a(href="/app/home")
                        span.glyphicon.glyphicon-home
                        span 首页
                li.active 完成任务

            //功能导航
            nav.navbar.navbar-default.navbar-fixed-top
                div.container-fluid
                    div.navbar-header
                        button.navbar-toggle.collapsed(type='button', data-toggle='collapse', data-target='#navbar-collapse', aria-expanded='false')
                            span.sr-only Toggle navigation
                            span.icon-bar
                            span.icon-bar
                            span.icon-bar
                        a.navbar-brand(href="") 结束任务
                    #navbar-collapse.collapse.navbar-collapse.navbar-right
                        ul.nav.navbar-nav.navbar-right
                            li
                                a(href="",type="button",ng-click="vm.completeWorkorder()") 立即完成
                            li
                                a(href="",type="button",ng-click="vm.nptFormApi.reset()") 重置
                            li
                                | &nbsp &nbsp &nbsp &nbsp
            div.panel.panel-default
                div.panel-heading
                    span 请核对以下工单信息!
                div.panel-body
                    dl.dl-horizontal
                        dt 工单编号:
                        dd {{vm.workorderInfo.data.workOrder.sn}}
                        dt 工单名称:
                        dd {{vm.workorderInfo.data.workOrder.name}}
                        dt 客户机构:
                        dd {{vm.workorderInfo.data.workOrder.clientinstid | cacheFilter:'inst':'instname':'instid'}}
                        dt 工单来源:
                        dd {{vm.workorderInfo.data.workOrder.source | ctrlCodeFilter:'sourcetype':'name':'no'}}
                        dt 工单描述:
                        dd {{vm.workorderInfo.data.workOrder.descr}}
                        dt 工单状态:
                        dd
                            strong {{vm.workorderInfo.data.workOrder.state | ctrlCodeFilter:'workstate':'name':'no'}}
                        dt 分配人:
                        dd {{vm.workorderInfo.data.workOrder.processid | cacheFilter:'user':'name':'id'}}
                        dt 处理人:
                        dd {{vm.workorderInfo.data.workOrder.assignedid | cacheFilter:'user':'name':'id'}}
                        dt 分配日期:
                        dd {{vm.workorderInfo.data.workOrder.assigneddate | timestampFilter}}
                        dt 计划开始日期:
                        dd {{vm.workorderInfo.data.workOrder.processdate | timestampFilter:"yyyy-MM-dd"}}
                        dt 实际开始日期:
                        dd {{vm.workorderInfo.data.workOrder.doactiondate | timestampFilter}}
                        dt 计划完成日期:
                        dd {{vm.workorderInfo.data.workOrder.expirydate | timestampFilter:"yyyy-MM-dd"}}
                        dt 职责:
                        dd {{vm.workorderInfo.data.workOrder.duty | timestampFilter}}
                        dt 创建日期:
                        dd {{vm.workorderInfo.data.workOrder.createdate | timestampFilter}}

            div(npt-form="vm.completeWorkorderOptions",model="vm.model")