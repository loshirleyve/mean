//
   Created by Leon on 15/10/15.

extends ../../layout/layout-bizpage
block titleContent
    title 工单管理
block content
    script(src="/js/biz/contract/contractListGrid.js")
    script(src="/js/biz/contract/addContractForm.js")
    script(src="/js/biz/contract/contract.js")
    div(ng-app="contractApp")
        //通知区域
        //内容区域
        div(ng-view)

        //列表模板
        script(type="text/ng-template",id="list.html")
            //功能导航区域
            ul.breadcrumb
                li
                    a(href="app/home")
                        span.glyphicon.glyphicon-home
                        span 首页
                li.active 合同列表
            //功能按钮区域
            nav.navbar.navbar-default.navbar-fixed-top
                div.container-fluid
                    div.navbar-header
                        button.navbar-toggle.collapsed(type='button', data-toggle='collapse', data-target='#navbar-collapse', aria-expanded='false')
                            span.sr-only Toggle navigation
                            span.icon-bar
                            span.icon-bar
                            span.icon-bar
                        a.navbar-brand(href="#/addContract") 合同列表
                    div#navbar-collapse.collapse.navbar-collapse
                        ul.nav.navbar-nav.navbar-right
                            li
                                a(href="#") 新增合同
            div(npt-grid="vm.contractListGridOptions",model="vm.queryListService.contractList.data")


        //新增客户模板
        script(type="text/ng-template", id="addContract.html")
            //功能导航区域
            ul.breadcrumb
                li
                    a(href="/app/home")
                        span.glyphicon.glyphicon-home
                        span 首页
                li
                    a(href="#list")
                        span 客户列表
                li.active 新增客户

            nav.navbar.navbar-default.navbar-fixed-top
                div.container-fluid
                    div.navbar-header
                        button.navbar-toggle.collapsed(type='button', data-toggle='collapse', data-target='#navbar-collapse', aria-expanded='false')
                            span.sr-only Toggle navigation
                            span.icon-bar
                            span.icon-bar
                            span.icon-bar
                        a.navbar-brand(href="") 新增合同
                    div#navbar-collapse.collapse.navbar-collapse.navbar-right
                        ul.nav.navbar-nav.navbar-right(ng-if="vm.addContract.loading()")
                            li
                                a(href="") 正在保存,请稍后...
                        ul.nav.navbar-nav.navbar-right(ng-if="!vm.addContract.loading()")
                            li
                                a(href="",ng-disabled="vm.nptFormApi.form.$invalid", ng-click="vm.addContractSave(vm.model)") 保存
                            li
                                a(href="",ng-click="vm.reset()") 重置
                            li
                                a(href="#/list") 返回
                            li
                                | &nbsp &nbsp &nbsp &nbsp

            //数据表单区域
            div.page-header
                h4 基本信息
            div.page-body
                div(npt-form="vm.addClientFormOptions",model="vm.model")